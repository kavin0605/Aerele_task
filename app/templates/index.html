{% extends 'layout.html' %}
{% block title %}Dashboard - Inventory Management{% endblock %}
{% block content %}
<div class="page-header">
  <h1 class="page-title">Dashboard</h1>
  <div class="page-actions">
    <a href="/movements/create" class="btn btn-success">📦 Record Movement</a>
    <a href="/products/create" class="btn btn-primary">➕ Add Product</a>
  </div>
</div>

<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-number">{{ total_products }}</div>
    <div class="stat-label">Total Products</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ total_locations }}</div>
    <div class="stat-label">Warehouse Locations</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ total_movements }}</div>
    <div class="stat-label">Total Movements</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ active_inventory }}</div>
    <div class="stat-label">Active Inventory</div>
  </div>
</div>

<div class="dashboard-grid">
  <div class="dashboard-card">
    <div class="card-icon">📋</div>
    <h3 class="card-title">Manage Products</h3>
    <p class="card-description">Add, edit, and organize your product catalog with detailed information and specifications.</p>
    <a href="/products" class="btn btn-primary">View Products</a>
  </div>
  
  <div class="dashboard-card">
    <div class="card-icon">🏪</div>
    <h3 class="card-title">Warehouse Locations</h3>
    <p class="card-description">Set up and manage multiple warehouse locations to track inventory across different sites.</p>
    <a href="/locations" class="btn btn-primary">Manage Locations</a>
  </div>
  
  <div class="dashboard-card">
    <div class="card-icon">📦</div>
    <h3 class="card-title">Track Movements</h3>
    <p class="card-description">Record inventory movements including stock in, stock out, and transfers between locations.</p>
    <a href="/movements" class="btn btn-primary">View Movements</a>
  </div>
  
  <div class="dashboard-card">
    <div class="card-icon">📊</div>
    <h3 class="card-title">Inventory Reports</h3>
    <p class="card-description">Get real-time insights into your inventory levels and stock distribution across locations.</p>
    <a href="/reports/balance" class="btn btn-primary">View Reports</a>
  </div>
</div>

<div class="table-container">
  <div class="table-header">
    <h3 class="table-title">Recent Activity</h3>
    <a href="/movements" class="btn btn-secondary btn-sm">View All</a>
  </div>
  
  {% if recent_movements %}
  <table class="table">
    <thead>
      <tr>
        <th>🏷️ Product</th>
        <th>📍 Movement</th>
        <th>📦 Quantity</th>
        <th>🕒 Time</th>
      </tr>
    </thead>
    <tbody>
      {% for movement in recent_movements %}
      <tr>
        <td><strong>{{ movement.product_name }}</strong></td>
        <td>
          {% if movement.from_location_name == 'Stock Addition' %}
            <span class="status-badge status-good">📥 {{ movement.from_location_name }} → {{ movement.to_location_name }}</span>
          {% elif movement.to_location_name == 'Stock Removal' %}
            <span class="status-badge status-low">📤 {{ movement.from_location_name }} → {{ movement.to_location_name }}</span>
          {% else %}
            <span class="status-badge status-info">🔄 {{ movement.from_location_name }} → {{ movement.to_location_name }}</span>
          {% endif %}
        </td>
        <td><strong>{{ movement.quantity }}</strong> units</td>
        <td style="color: #6c757d; font-size: 0.9rem;">{{ movement.timestamp.strftime('%m/%d %H:%M') }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div style="padding: 2rem; text-align: center; color: #6c757d;">
    <div style="font-size: 3rem; opacity: 0.3; margin-bottom: 1rem;">📈</div>
    <p>Recent inventory movements will appear here</p>
    <a href="/movements/create" class="btn btn-success" style="margin-top: 1rem;">Record First Movement</a>
  </div>
  {% endif %}
</div>
{% endblock %}
